# Overview

1. Firebase Project
    - Firebase Realtime Database
    - Firebase Functions: These functions perform updates on data such as the progress of projects in the Firebase Database once new results will be submitted by app users.
2. MapSwipe Workers
    - The MapSwipe Workers create new projects from the project drafts submitted by project managers. 
    - The MapSwipe Workers transfer data from Firebase Database to a Postgres database for long term storage.
4. Postgres Database
    -  A database to store all data generated by MapSwipe. Used by the MapSwipe Workers.
3. Manager Dashboard
5. API

## Deployment Diagram

![Deployment Diagram](/_static/img/deployment_diagram.png)

**Relations:**

- Mapswipe Client (App) - Realtime Database
    - Mapswipe Client is requesting some `projects`, data of a specific `users.userId`. In case of a project selection a group (`groups.projectId.groupId`) and associated tasks (`tasks.projectId.groupsId`) will be requested
    - Mapswipe Client will only write to Firebase Realtime Database in case of result generation.
        - Mapswipe Client is writing to `results.projectId.groupId.userId1.` in form of `timestamp` and `resultCount` attributes when and how many results were generated.
        - The result itself will be written to `results.projectId.groupId.userId1.taskId1.result`.
- Mapswipe Client (Manager Dashboard) - Realtime Database
    - Using the Manager Dashboard user can submitt new project drafts to Firebase (`project_drafts.projectDraftId.`)
- Mapswipe Workers
    - projectCreation - Realtime Database
        - requests `projectDrafts` from Realtime Database
        - writes to `projects.projectId`, `groups.projectId` and `tasks.projectId`
    - projectCreation - Postgres
        - writes projectDraft, project, groups and tasks to Postgres
    - tansfer_results - Realtime Database
        - requests `results` from Realtime Database
        - deletes `results` from Realtime Database
    - tansfer_results - Postgres
        - writes results to Postgres
