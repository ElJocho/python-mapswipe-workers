

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Enable new project types &mdash; MapSwipe Back-End  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Proposal for a new project type" href="project_type-proposal.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> MapSwipe Back-End
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html">Readme File</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html#python-mapswipe-workers-documentation">Python MapSwipe Workers Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_model.html">Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Use Cases</a></li>
</ul>
<p class="caption"><span class="caption-text">Using:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
<p class="caption"><span class="caption-text">Project Types:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="project_type-buildArea.html">Build Area</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_type-footprint.html">Footprint</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagrams.html">Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_type-proposal.html">Proposal for a new project type</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Enable new project types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#projects">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#groups">Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#import-workflow">Import Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-model">Data Model</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MapSwipe Back-End</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Enable new project types</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/project_type-enable.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="enable-new-project-types">
<h1>Enable new project types<a class="headerlink" href="#enable-new-project-types" title="Permalink to this headline">¶</a></h1>
<p>Currently MapSwipe handles only one type of mapping project. The one with the six squares working tiles as an input. Users tap several times to indicate the presence of buildings. However, there might be more to be mapped. Think about a building by building validation of footprint geometries or even detectiing change on pairs of satellite imagery.</p>
<p>To address such new mapping tasks we need to enable that projects can have different tpyes. Each project type will refer to a specific backend workflow (import, export) and will use a different map view in the app. We might also want to show different instructions for each project types and have distinct tutorials.</p>
<p>In this document we will try to document what we need to consider when shifting to multiple project types.</p>
<div class="section" id="projects">
<h2>Projects<a class="headerlink" href="#projects" title="Permalink to this headline">¶</a></h2>
<p>projects need a “type”, e,g, 1, 2, 3 or “binary”, “validation”
this needs to be set during the import (add to html importer)
the main project view should show the project types
when starting to map we should check the project type and the</p>
<blockquote>
<div><p>corresponding map view needs to be displayed (each project type has its own mapping view)</p>
</div></blockquote>
<p>project type will also be considered during the import module, task creation etc.</p>
<p>This is how projects are currently looking like:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;contributors&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;groupAverage&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;1002&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://www.redcrosseth.org/media/k2/items/cache/5a05a447acfdf6fcc40548cc4c1cea8d_L.jpg&quot;</span><span class="p">,</span>
  <span class="nt">&quot;importKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;-LK7IpMFNJ7mwe2IQych&quot;</span><span class="p">,</span>
  <span class="nt">&quot;isFeatured&quot;</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;lookFor&quot;</span> <span class="p">:</span> <span class="s2">&quot;BUILDINGS&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;Map vulnerable communities in Ethiopia 4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;progress&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;projectDetails&quot;</span> <span class="p">:</span> <span class="s2">&quot;Ethiopia has a population of over 102 million, yet many people live in remote and rural locations. These communities are vulnerable to flooding, droughts and other extreme climate related events. The Red Cross, with the support of the IKEA Foundation is asking you to help map and locate these rural communities, allowing the Red Cross help prepare them for any pending disasters. Please swipe slowly through the satellite imagery and tap anything that looks like it could be a building or village.&quot;</span><span class="p">,</span>
  <span class="nt">&quot;state&quot;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="nt">&quot;tileserver&quot;</span> <span class="p">:</span> <span class="s2">&quot;bing&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;verificationCount&quot;</span> <span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
  <span class="nt">&quot;zoom&quot;</span> <span class="p">:</span> <span class="mi">18</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And here is a proposed project structure to allow multiple project types:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;contributors&quot; : 0,
  &quot;id&quot; : &quot;1002&quot;,
  &quot;image&quot; : &quot;http://www.redcrosseth.org/media/k2/items/cache/5a05a447acfdf6fcc40548cc4c1cea8d_L.jpg&quot;,
  &quot;importKey&quot; : &quot;-LK7IpMFNJ7mwe2IQych&quot;,
  &quot;isFeatured&quot; : false,
  &quot;lookFor&quot; : &quot;BUILDINGS&quot;,
  &quot;name&quot; : &quot;Map vulnerable communities in Ethiopia 4&quot;,
  &quot;progress&quot; : 0,
  &quot;projectDetails&quot; : &quot;Ethiopia has a population of over 102 million, yet many people live in remote and rural locations. These communities are vulnerable to flooding, droughts and other extreme climate related events. The Red Cross, with the support of the IKEA Foundation is asking you to help map and locate these rural communities, allowing the Red Cross help prepare them for any pending disasters. Please swipe slowly through the satellite imagery and tap anything that looks like it could be a building or village.&quot;,
  &quot;state&quot; : 3,
  &quot;type&quot; : 1,
  &quot;verificationCount&quot; : &quot;3&quot;,
  &quot;settings&quot;: {
    &quot;tileserver&quot; : &quot;bing&quot;,
    &quot;zoom&quot; : 18&quot;
    }
}
</pre></div>
</div>
<p>Each project will have basic information describing the content: <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">projectDetails</span></code>, <code class="docutils literal notranslate"><span class="pre">lookFor</span></code>, <code class="docutils literal notranslate"><span class="pre">image</span></code>, <code class="docutils literal notranslate"><span class="pre">importKey</span></code> and a new <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute.</p>
<p>Furthermore, there are some attributes related to stats and displaying the project in the app: <code class="docutils literal notranslate"><span class="pre">isFeatured</span></code>, <code class="docutils literal notranslate"><span class="pre">state</span></code>, <code class="docutils literal notranslate"><span class="pre">contributors</span></code> and <code class="docutils literal notranslate"><span class="pre">progress</span></code>.</p>
<p>Finally, a new <code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute is proposed. This attribute will be different for each project type.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">a</span></code> (built_area_type) it would look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>&quot;settings&quot;: {
  &quot;tileserver&quot; : &quot;bing&quot;,
  &quot;zoom&quot; : 18&quot;,
  &quot;extent&quot;: &quot;./data/project_xy.kml&quot;
}
</pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">b</span></code> (building_footprint_validation) it would look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>&quot;settings&quot;: {
  &quot;tileserver&quot; : &quot;digital_globe&quot;,
  &quot;input_geometry&quot;: &quot;./data/project_xy_buildings.geojson&quot;
}
</pre></div>
</div>
<p>You could add new types of projects and would only need to adjust <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">settings</span></code> part of a project.</p>
</div>
<div class="section" id="groups">
<h2>Groups<a class="headerlink" href="#groups" title="Permalink to this headline">¶</a></h2>
<p>Groups are uploaded to firebase and contain <code class="docutils literal notranslate"><span class="pre">tasks</span></code>. Groups will be displayed in the mapping view in the app. For different project types, groups will have somehow different format.</p>
<p>This is how groups are currently looking like:#</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;completedCount&quot; : 0,
  &quot;count&quot; : 114,
  &quot;distributedCount&quot; : 0,
  &quot;id&quot; : 1878,
  &quot;projectId&quot; : &quot;9&quot;,
  &quot;reportCount&quot; : 0,
  &quot;tasks&quot; : {...},
  &quot;xMax&quot; : &quot;160176&quot;,
  &quot;xMin&quot; : &quot;160139&quot;,
  &quot;yMax&quot; : &quot;127033&quot;,
  &quot;yMin&quot; : &quot;127031&quot;,
  &quot;zoomLevel&quot; : 18
}
</pre></div>
</div>
<p>And here is a proposed group structure to allow multiple project types:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;completedCount&quot; : 0,
  &quot;count&quot; : 114,
  &quot;neededCount&quot; : 0,
  &quot;id&quot; : 1878,
  &quot;projectId&quot; : &quot;9&quot;,
  &quot;tasks&quot; : {...},
  &quot;type&quot;: 1,
  &quot;users&quot;: [&quot;user_a&quot;, &quot;user_b&quot;, ... ,&quot;user_x&quot;]
}
</pre></div>
</div>
<p>Some of the attributes of the old structure have not been used: <code class="docutils literal notranslate"><span class="pre">distributedCount</span></code>, <code class="docutils literal notranslate"><span class="pre">reportCount</span></code>.</p>
<p>Furthermore, I’m not sure how <code class="docutils literal notranslate"><span class="pre">zoomLevel</span></code>, <code class="docutils literal notranslate"><span class="pre">xMax</span></code>, <code class="docutils literal notranslate"><span class="pre">xMin</span></code>, <code class="docutils literal notranslate"><span class="pre">yMax</span></code>, <code class="docutils literal notranslate"><span class="pre">yMin</span></code> are used by the app. This information should also be included in the <code class="docutils literal notranslate"><span class="pre">tasks</span></code>.</p>
<blockquote>
<div><p>Adding a <code class="docutils literal notranslate"><span class="pre">neededCount</span></code> attribute will allow us to set a dynamic number of users needed for each group. This would help us in addressing low quality, by adding more users for these specific groups.</p>
<p>Adding a <code class="docutils literal notranslate"><span class="pre">users</span></code> attribute will help us to distribute each groups only to each user. We are currently not sure if sometimes users work on a group twice.</p>
<p>Finally, there is a <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute. I’m not sure if that’s actually needed. There is nothing type specific for groups at the moment, except the structure of the <code class="docutils literal notranslate"><span class="pre">tasks</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h2>
<p>Tasks are the most basic structure in our crowdsourcing workfflow. They have all the information needed to display the task to the user in the app.</p>
<p>Currently, tasks look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>&quot;18-160175-127033&quot; : {
  &quot;id&quot; : &quot;18-160175-127033&quot;,
  &quot;projectId&quot; : &quot;9&quot;,
  &quot;taskX&quot; : &quot;160175&quot;,
  &quot;taskY&quot; : &quot;127033&quot;,
  &quot;taskZ&quot; : &quot;18&quot;,
  &quot;url&quot; : &quot;http://t0.tiles.virtualearth.net/tiles/a122333000110323113.jpeg?g=854&amp;mkt=en-US&amp;token=AopsdXjtTu-IwNoCTiZBtgRJ1g7yPkzAi65nXplc-eLJwZHYlAIf2yuSY_Kjg3Wn&quot;,
  &quot;wkt&quot; : &quot;&quot;
}
</pre></div>
</div>
<p>And here is a proposed task structure to allow multiple project types:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>&quot;18-160175-127033&quot; : {
  &quot;id&quot; : &quot;18-160175-127033&quot;,
  &quot;projectId&quot; : &quot;9&quot;,
  &quot;type&quot;: 1,
  &quot;info&quot;: {
    &quot;taskX&quot; : &quot;160175&quot;,
    &quot;taskY&quot; : &quot;127033&quot;,
    &quot;taskZ&quot; : &quot;18&quot;,
    &quot;url&quot; : &quot;http://t0.tiles.virtualearth.net/tiles/a122333000110323113.jpeg?g=854&amp;mkt=en-US&amp;token=AopsdXjtTu-IwNoCTiZBtgRJ1g7yPkzAi65nXplc-eLJwZHYlAIf2yuSY_Kjg3Wn&quot;,
    &quot;wkt&quot; : &quot;&quot;
  }
}
</pre></div>
</div>
<p>The most basic information per task are <code class="docutils literal notranslate"><span class="pre">id</span></code> (composed of some cool structure, which might be different regarding different projects), <code class="docutils literal notranslate"><span class="pre">projectId</span></code> and the <code class="docutils literal notranslate"><span class="pre">type</span></code> of a project.</p>
<p>All other information will go into a new <code class="docutils literal notranslate"><span class="pre">info</span></code> attribute. This will look differently concerning the type of the project. The <code class="docutils literal notranslate"><span class="pre">info</span></code> attribute should contain all information needed for displaying the task in the app.</p>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="import-workflow">
<h2>Import Workflow<a class="headerlink" href="#import-workflow" title="Permalink to this headline">¶</a></h2>
<p>check for new imports and check the type of the project/import
make sure that this does not conflict with our current import workflow, enable that type=”1” refers to the current import workflow
create new import and create new groups for different project type
let’s stick to the idea of groups
what is the input needed for a building by building project</p>
</div>
<div class="section" id="data-model">
<h2>Data Model<a class="headerlink" href="#data-model" title="Permalink to this headline">¶</a></h2>
<p>the current data model is based on tasks with an ID generated using the TMS schema
new project types might require a different data model
a data model with custom input geometries (e.g. building footprints) might need a different data model</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="project_type-proposal.html" class="btn btn-neutral float-left" title="Proposal for a new project type" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, MapSwipe

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>